# /home/<YOUR_USER>/syhub/templates/victoria-metrics.service.j2
# Systemd service unit for VictoriaMetrics
# Generated by syhub.sh from template

[Unit]
Description=VictoriaMetrics time series database
After=network.target

[Service]
User=__VM_SERVICE_USER__
Group=__VM_SERVICE_GROUP__
# StartLimitIntervalSec=0
# StartLimitBurst=5

# Runtime Directory for PID File (Optional but good practice)
RuntimeDirectory=victoria-metrics
RuntimeDirectoryMode=0755

ExecStart=/usr/local/bin/victoria-metrics-prod \
  -storageDataPath="__VM_DATA_DIR__" \
  -httpListenAddr="0.0.0.0:__VM_PORT__" \
  -retentionPeriod="__VM_RETENTION_PERIOD__" \
  -loggerOutput=stderr \
  -loggerFormat=json

# Process Management
Restart=always
RestartSec=5s
StandardOutput=journal
StandardError=journal

# Security Hardening (Optional, uncomment if needed)
# NoNewPrivileges=true
# ProtectSystem=strict
# ProtectHome=true
# ReadWritePaths="__VM_DATA_DIR__"
# CapabilityBoundingSet=~CAP_SYS_PTRACE # Example: Remove unnecessary capabilities

[Install]
WantedBy=multi-user.target