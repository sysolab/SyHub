# /home/<YOUR_USER>/syhub/templates/flask-dashboard.service.j2
    # Systemd service unit for the Flask Dashboard (via Gunicorn)
    # Generated by syhub.sh from template
    
    [Unit]
    Description=syHub Flask Web Dashboard (__PROJECT_NAME__)
    After=network.target victoriametrics.service nodered.service # Ensure DB and Node-RED are up (optional dependency)
    
    [Service]
    # Run as the application user who owns the files
    User=__APP_USER__
    Group=__APP_GROUP__
    
    # Set working directory to the application's base directory
    WorkingDirectory=__BASE_DIR__
    
    # Set environment variables needed by the Flask app
    Environment="PATH=__VENV_DIR__/bin:/usr/bin:/bin" # Crucial: Ensure venv bin is in PATH
    Environment="SYHUB_CONFIG_PATH=__CONFIG_FILE_PATH__"
    
    # Command to start Gunicorn
    # ExecStartPre=+/bin/mkdir -p __BASE_DIR__/logs # Optional: Create log dir if Flask logs to file
    ExecStart=__VENV_DIR__/bin/gunicorn \
        --workers __DASHBOARD_WORKERS__ \
        --bind 0.0.0.0:__DASHBOARD_PORT__ \
        --access-logfile - \
        --error-logfile - \
        flask_app_deployed:app
    
    # Process Management
    Restart=always
    RestartSec=10s # Give it a bit longer to restart if needed
    
    # Standard output/error (Gunicorn logs to stdout/stderr by default with '-')
    StandardOutput=journal
    StandardError=journal
    
    [Install]
    WantedBy=multi-user.target